<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@terao2</title>
  <link rel="stylesheet" href="https://cxh.pages.dev/style.css">
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background-color: #000;
    }
    
    #player {
      position: absolute;
      width: 100% !important;
      height: 100% !important;
    }
    
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      color: white;
    }
    
    .loader {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      flex-direction: column;
    }
    
    .modal-content {
      background-color: #1e1e1e;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      color: white;
      max-width: 80%;
    }
    
    .close-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    
    .channel-selector {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 9000;
      background: rgba(0, 0, 0, 0.7);
      padding: 5px;
      border-radius: 5px;
      color: white;
    }
  </style>
  <!-- Added the requested script -->
  <script type='text/javascript' src='//pl26257625.effectiveratecpm.com/c4/b1/b1/c4b1b1de90a35437dcd6eb8ed1a0a8ca.js'></script>
</head>
<body>
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loader"></div>
    <p>Loading stream data...</p>
  </div>
  
  <div class="modal" id="devToolsModal">
    <div class="modal-content">
      <h2>Developer Tools Detected</h2>
      <p>For security reasons, this stream cannot be viewed while developer tools are open.</p>
      <button class="close-btn" id="close">Close</button>
    </div>
  </div>
  
  <div class="modal" id="adBlockModal">
    <div class="modal-content">
      <h2>AdBlock Detected</h2>
      <p>Please disable AdBlock to continue watching the stream.</p>
      <button class="close-btn" id="closeAdBlock">Close</button>
    </div>
  </div>
  
  <div class="channel-selector">
    <select id="channelSelect">
      <option value="loading">Loading channels...</option>
    </select>
  </div>
  
  <div id="player"></div>
  
  <script src='https://content.jwplatform.com/libraries/KB5zFt7A.js'></script>
  <script>
    // Variables
    let playerInstance;
    let channels = [];
    let currentChannel = null;
    
    // Load channels from JSON file
    async function loadChannels() {
      try {
        const response = await fetch('channels.json');
        if (!response.ok) {
          throw new Error('Failed to load channels data');
        }
        channels = await response.json();
        
        // Update channel selector
        const channelSelect = document.getElementById('channelSelect');
        channelSelect.innerHTML = '';
        
        channels.forEach((channel, index) => {
          const option = document.createElement('option');
          option.value = index;
          option.textContent = channel.name;
          channelSelect.appendChild(option);
        });
        
        // Initialize player with first channel
        if (channels.length > 0) {
          initializePlayer(0);
        } else {
          showError('No channels available');
        }
      } catch (error) {
        console.error('Error loading channels:', error);
        showError('Failed to load channels data');
      }
    }
    
    // Initialize JW Player
    function initializePlayer(channelIndex) {
      const channel = channels[channelIndex];
      currentChannel = channel;
      
      if (playerInstance) {
        playerInstance.remove();
      }
      
      playerInstance = jwplayer("player").setup({
        controls: true,
        displaytitle: true,
        autoplay: true,    
        displaydescription: true,
        abouttext: "Join Telegram: @CricMantraHd",
        aboutlink: channel.telegramLink || "https://t.me/+kfJZ4exLottkOTY1",
        skin: {
          name: "netflix"
        },
        logo: {
          file: channel.logo || "",
          link: channel.telegramLink || "https://t.me/+kfJZ4exLottkOTY1"
        },
        captions: {
          color: "#FFF",
          fontSize: 14,
          backgroundOpacity: 0,
          edgeStyle: "raised"
        },
        playlist: [
          {
            title: channel.name,
            description: channel.description || "Live Stream",
            image: channel.image || "",
            sources: [
              {
                file: channel.streamUrl,
                label: "Auto",
                default: true
              }
            ],
          }
        ],
        advertising: {
          client: "vast",
          schedule: [
            {
              offset: "pre",
              tag: channel.adTag || ""
            }
          ]
        }
      });
      
      // Add custom controls
      playerInstance.on("ready", function () {
        // Hide loading overlay
        document.getElementById('loadingOverlay').style.display = 'none';
        
        const playerContainer = playerInstance.getContainer();
        const buttonContainer = playerContainer.querySelector(".jw-button-container");
        
        // Rewind button functionality
        const rewindContainer = playerContainer.querySelector(".jw-display-icon-rewind");
        const rewindButton = rewindContainer.cloneNode(true);
        const rewindIcon = rewindButton.querySelector(".jw-icon-rewind");
        rewindIcon.style.transform = "scaleX(1)";
        rewindIcon.ariaLabel = "Rewind 10 Seconds";
        
        const nextContainer = playerContainer.querySelector(".jw-display-icon-next");
        if (nextContainer) {
          nextContainer.parentNode.insertBefore(rewindButton, nextContainer);
        }
        
        // Rewind functionality for the control bar
        const rewindControlBarButton = buttonContainer.querySelector(".jw-icon-rewind");
        if (rewindControlBarButton) {
          const rewindControlBarClone = rewindControlBarButton.cloneNode(true);
          rewindControlBarClone.style.transform = "scaleX(1)";
          rewindControlBarClone.ariaLabel = "Rewind 10 Seconds";
          buttonContainer.insertBefore(rewindControlBarClone, buttonContainer.firstChild);
          
          // On click of rewind button, seek backward by 10 seconds
          [rewindButton, rewindControlBarClone].forEach((button) => {
            button.onclick = () => {
              const currentPosition = playerInstance.getPosition();
              const newPosition = Math.max(currentPosition - 10, 0); // Prevent going below 0
              playerInstance.seek(newPosition);
            };
          });
        }
        
        // Detect adblock
        playerInstance.on("adBlock", () => {
          document.getElementById("adBlockModal").style.display = "flex";
        });
      });
      
      // Error handling
      playerInstance.on("error", function(e) {
        console.error("Player error:", e);
        showError("Stream error. Please try again later.");
      });
    }
    
    // Show error message
    function showError(message) {
      document.getElementById('loadingOverlay').style.display = 'none';
      
      const errorModal = document.createElement('div');
      errorModal.className = 'modal';
      errorModal.style.display = 'flex';
      
      errorModal.innerHTML = `
        <div class="modal-content">
          <h2>Error</h2>
          <p>${message}</p>
          <button class="close-btn" onclick="location.reload()">Reload</button>
        </div>
      `;
      
      document.body.appendChild(errorModal);
    }
    
    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Load channels
      loadChannels();
      
      // Channel selector change event
      document.getElementById('channelSelect').addEventListener('change', function(e) {
        const channelIndex = parseInt(e.target.value);
        initializePlayer(channelIndex);
      });
      
      // AdBlock modal close button
      document.getElementById('closeAdBlock').addEventListener('click', function() {
        document.getElementById('adBlockModal').style.display = 'none';
      });
      
      // DevTools modal close button
      document.getElementById('close').addEventListener('click', function() {
        document.getElementById('devToolsModal').style.display = 'none';
      });
    });
    
    // Detect developer tools
    function detectDevTools() {
      const devToolsOpen = window.outerWidth - window.innerWidth > 160 || 
                          window.outerHeight - window.innerHeight > 160;
      
      if (devToolsOpen) {
        document.getElementById('devToolsModal').style.display = 'flex';
        if (playerInstance) {
          playerInstance.pause();
        }
      } else {
        document.getElementById('devToolsModal').style.display = 'none';
        if (playerInstance && playerInstance.getState() === 'paused') {
          playerInstance.play();
        }
      }
    }
    
    // Check for developer tools periodically
    setInterval(detectDevTools, 1000);
    
    // Prevent right-click
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      return false;
    });
    
    // Block various keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // Prevent F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
      if (
        e.keyCode === 123 || 
        (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
        (e.ctrlKey && e.keyCode === 85)
      ) {
        e.preventDefault();
        return false;
      }
    });
    
    // Confirmation message for joining Telegram channel
    window.addEventListener('load', function() {
      setTimeout(function() {
        var joinConfirm = confirm("Join For More Links!!");
        if (joinConfirm) {
          window.open("https://t.me/+kfJZ4exLottkOTY1", "_blank");
        }
      }, 3000);
    });
  </script>
  
  <!-- Additional protection against developer tools -->
  <script disable-devtool-auto='true' src='https://cdn.jsdelivr.net/npm/disable-devtool' clear-log='true' disable-select='true' disable-copy='true' disable-cut='true' disable-paste='true'></script>
</body>
</html>
